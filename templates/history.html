{% extends 'base.html' %}
{% load humanize %}
{% block content %}
<style>
    :root {
        --background: #ffffff;
        --foreground: #0a0a0a;
        --card: #ffffff;
        --card-foreground: #0a0a0a;
        --primary: #030213;
        --primary-foreground: #ffffff;
        --secondary: #f3f4f6;
        --secondary-foreground: #030213;
        --muted: #ececf0;
        --muted-foreground: #717182;
        --accent: #e9ebef;
        --accent-foreground: #030213;
        --destructive: #d4183d;
        --destructive-foreground: #ffffff;
        --border: rgba(0, 0, 0, 0.1);
        --ring: #9ca3af;
        --chart-1: #f59e0b;
        --chart-2: #10b981;
        --chart-3: #3b82f6;
        --chart-4: #8b5cf6;
        --chart-5: #ef4444;
        --radius: 0.625rem;
    }

    body {
        background-color: var(--background);
        color: var(--foreground);
    }

    .bg-background {
        background-color: var(--background);
    }

    .bg-card {
        background-color: var(--card);
    }

    .bg-primary {
        background-color: var(--primary);
    }

    .bg-secondary {
        background-color: var(--secondary);
    }

    .bg-muted {
        background-color: var(--muted);
    }

    .bg-accent {
        background-color: var(--accent);
    }

    .text-foreground {
        color: var(--foreground);
    }

    .text-primary {
        color: var(--primary);
    }

    .text-primary-foreground {
        color: var(--primary-foreground);
    }

    .text-muted-foreground {
        color: var(--muted-foreground);
    }

    .border-border {
        border-color: var(--border);
    }

    .text-chart-1 {
        color: var(--chart-1);
    }

    .text-chart-2 {
        color: var(--chart-2);
    }

    .text-chart-3 {
        color: var(--chart-3);
    }

    .text-chart-4 {
        color: var(--chart-4);
    }

    .text-chart-5 {
        color: var(--chart-5);
    }

    .status-completed {
        background-color: var(--chart-2);
        color: white;
    }

    .status-pending {
        background-color: var(--chart-1);
        color: white;
    }

    .status-cancelled {
        background-color: var(--chart-5);
        color: white;
    }

    .tab-button {
        padding: 8px 16px;
        border-radius: var(--radius);
        border: 1px solid var(--border);
        background-color: var(--background);
        color: var(--foreground);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .tab-button.active {
        background-color: var(--primary);
        color: var(--primary-foreground);
        border-color: var(--primary);
    }

    .filter-input {
        background-color: var(--secondary);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 8px 12px;
        transition: all 0.2s ease;
    }

    .filter-input:focus {
        outline: none;
        border-color: var(--primary);
    }
</style>


<!-- Main Content -->
<div class="container mx-auto px-6 py-8">
    <div class="mb-8">
        <h1 class="text-3xl font-bold mb-2">Trading History</h1>
        <p class="text-muted-foreground">View and manage your trading history and transactions</p>
    </div>

    <!-- Summary Cards -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="bg-card border border-border rounded-lg p-6">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-chart-2/10 rounded-full flex items-center justify-center">
                    <i class="fas fa-chart-line text-chart-2"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm text-muted-foreground">Total Trades</p>
                    <p class="text-2xl font-bold" id="totalTrades">127</p>
                </div>
            </div>
        </div>

        <div class="bg-card border border-border rounded-lg p-6">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-chart-3/10 rounded-full flex items-center justify-center">
                    <i class="fas fa-dollar-sign text-chart-3"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm text-muted-foreground">Total Volume</p>
                    <p class="text-2xl font-bold" id="totalVolume">$48,532</p>
                </div>
            </div>
        </div>

        <div class="bg-card border border-border rounded-lg p-6">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-chart-2/10 rounded-full flex items-center justify-center">
                    <i class="fas fa-arrow-up text-chart-2"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm text-muted-foreground">Profit/Loss</p>
                    <p class="text-2xl font-bold text-chart-2" id="profitLoss">+$2,847</p>
                </div>
            </div>
        </div>

        <div class="bg-card border border-border rounded-lg p-6">
            <div class="flex items-center">
                <div class="w-12 h-12 bg-chart-1/10 rounded-full flex items-center justify-center">
                    <i class="fas fa-percentage text-chart-1"></i>
                </div>
                <div class="ml-4">
                    <p class="text-sm text-muted-foreground">Win Rate</p>
                    <p class="text-2xl font-bold" id="winRate">68.5%</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Filters and Tabs -->
    <div class="bg-card border border-border rounded-lg p-6 mb-6">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0">
            <!-- Tabs -->
            <div class="flex space-x-2">
                <button class="tab-button active" onclick="setActiveTab('all')" id="allTab">All Orders</button>
                <button class="tab-button" onclick="setActiveTab('completed')" id="completedTab">Completed</button>
                <button class="tab-button" onclick="setActiveTab('pending')" id="pendingTab">Pending</button>
                <button class="tab-button" onclick="setActiveTab('cancelled')" id="cancelledTab">Cancelled</button>
            </div>

            <!-- Filters -->
            <div class="flex space-x-4">
                <select class="filter-input" id="pairFilter" onchange="filterData()">
                    <option value="">All Pairs</option>
                    <option value="BTC/USD">BTC/USD</option>
                    <option value="ETH/USD">ETH/USD</option>
                    <option value="SOL/USD">SOL/USD</option>
                    <option value="BNB/USD">BNB/USD</option>
                </select>

                <input type="date" class="filter-input" id="dateFilter" onchange="filterData()">

                <button class="tab-button" onclick="exportData()">
                    <i class="fas fa-download mr-2"></i>Export
                </button>
            </div>
        </div>
    </div>

    <!-- Trading History Table -->
    <div class="bg-card border border-border rounded-lg overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full">
                <thead class="bg-muted">
                    <tr>
                        <th class="px-6 py-4 text-left font-semibold">Date & Time</th>
                        <th class="px-6 py-4 text-left font-semibold">Pair</th>
                        <th class="px-6 py-4 text-left font-semibold">Type</th>
                        <th class="px-6 py-4 text-left font-semibold">Side</th>
                        <th class="px-6 py-4 text-right font-semibold">Amount</th>
                        <th class="px-6 py-4 text-right font-semibold">Price</th>
                        <th class="px-6 py-4 text-right font-semibold">Total</th>
                        <th class="px-6 py-4 text-center font-semibold">Status</th>
                        <th class="px-6 py-4 text-center font-semibold">Actions</th>
                    </tr>
                </thead>
                <tbody id="historyTableBody">
                    <!-- Data will be populated by JavaScript -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between mt-6">
        <div class="text-sm text-muted-foreground">
            Showing <span id="showingStart">1</span> to <span id="showingEnd">10</span> of <span
                id="totalRecords">127</span> entries
        </div>
        <div class="flex space-x-2">
            <button class="tab-button" onclick="changePage(-1)" id="prevBtn">
                <i class="fas fa-chevron-left mr-2"></i>Previous
            </button>
            <button class="tab-button" onclick="changePage(1)" id="nextBtn">
                Next<i class="fas fa-chevron-right ml-2"></i>
            </button>
        </div>
    </div>

    <!-- Order Details Modal -->
    <div id="orderModal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-card border border-border rounded-lg p-6 max-w-md w-full mx-4">
            <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">Order Details</h3>
                <button onclick="closeModal()" class="text-muted-foreground hover:text-foreground">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="orderDetails" class="space-y-3">
                <!-- Order details will be populated here -->
            </div>
        </div>
    </div>
</div>
{% endblock %}