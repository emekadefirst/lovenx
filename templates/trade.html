{% extends 'base.html' %}
{% block content %}

<style>
    :root {
        --background: #ffffff;
        --foreground: #0a0a0a;
        --card: #ffffff;
        --card-foreground: #0a0a0a;
        --primary: #030213;
        --primary-foreground: #ffffff;
        --secondary: #f3f4f6;
        --secondary-foreground: #030213;
        --muted: #ececf0;
        --muted-foreground: #717182;
        --accent: #e9ebef;
        --accent-foreground: #030213;
        --destructive: #d4183d;
        --destructive-foreground: #ffffff;
        --border: rgba(0, 0, 0, 0.1);
        --ring: #9ca3af;
        --chart-1: #f59e0b;
        --chart-2: #10b981;
        --chart-3: #3b82f6;
        --chart-4: #8b5cf6;
        --chart-5: #ef4444;
        --radius: 0.625rem;
    }

    body {
        background-color: var(--background);
        color: var(--foreground);
    }

    .bg-background {
        background-color: var(--background);
    }

    .bg-card {
        background-color: var(--card);
    }

    .bg-primary {
        background-color: var(--primary);
    }

    .bg-secondary {
        background-color: var(--secondary);
    }

    .bg-muted {
        background-color: var(--muted);
    }

    .bg-accent {
        background-color: var(--accent);
    }

    .text-foreground {
        color: var(--foreground);
    }

    .text-primary {
        color: var(--primary);
    }

    .text-primary-foreground {
        color: var(--primary-foreground);
    }

    .text-muted-foreground {
        color: var(--muted-foreground);
    }

    .border-border {
        border-color: var(--border);
    }

    .text-chart-1 {
        color: var(--chart-1);
    }

    .text-chart-2 {
        color: var(--chart-2);
    }

    .text-chart-3 {
        color: var(--chart-3);
    }

    .text-chart-4 {
        color: var(--chart-4);
    }

    .text-chart-5 {
        color: var(--chart-5);
    }

    .price-up {
        color: var(--chart-2);
    }

    .price-down {
        color: var(--chart-5);
    }

    .input-field {
        background-color: var(--secondary);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 8px 12px;
        width: 100%;
        transition: all 0.2s ease;
    }

    .input-field:focus {
        outline: none;
        border-color: var(--primary);
    }

    .btn-buy {
        background-color: var(--chart-2);
        color: white;
        border-radius: var(--radius);
        padding: 8px 16px;
        font-weight: 500;
        border: none;
        cursor: pointer;
        transition: opacity 0.2s ease;
    }

    .btn-sell {
        background-color: var(--chart-5);
        color: white;
        border-radius: var(--radius);
        padding: 8px 16px;
        font-weight: 500;
        border: none;
        cursor: pointer;
        transition: opacity 0.2s ease;
    }

    .btn-buy:hover,
    .btn-sell:hover {
        opacity: 0.9;
    }

    .order-book-row:hover {
        background-color: var(--muted);
    }

    .tab-button {
        padding: 8px 16px;
        border-radius: var(--radius);
        border: 1px solid var(--border);
        background-color: var(--background);
        color: var(--foreground);
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .tab-button.active {
        background-color: var(--primary);
        color: var(--primary-foreground);
        border-color: var(--primary);
    }
</style>
<div class="container mx-auto px-6 py-6">
    <!-- Market Selector -->
    <div class="mb-6">
        <div class="flex items-center space-x-4 mb-4">
            <select id="marketSelector" class="input-field w-auto" onchange="changeMarket()">
                <option value="BTC/USD">BTC/USD</option>
                <option value="ETH/USD">ETH/USD</option>
                <option value="SOL/USD">SOL/USD</option>
                <option value="BNB/USD">BNB/USD</option>
            </select>
            <div class="flex items-center space-x-2">
                <span class="text-2xl font-bold" id="currentPrice">₦43,250.00</span>
                <span class="price-up" id="priceChange">+2.34%</span>
            </div>
        </div>

        <!-- Market Stats -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-card border border-border rounded-lg p-4">
                <div class="text-sm text-muted-foreground">24h High</div>
                <div class="font-medium" id="high24h">₦44,125.00</div>
            </div>
            <div class="bg-card border border-border rounded-lg p-4">
                <div class="text-sm text-muted-foreground">24h Low</div>
                <div class="font-medium" id="low24h">₦42,180.00</div>
            </div>
            <div class="bg-card border border-border rounded-lg p-4">
                <div class="text-sm text-muted-foreground">24h Volume</div>
                <div class="font-medium" id="volume24h">1,234.56 BTC</div>
            </div>
            <div class="bg-card border border-border rounded-lg p-4">
                <div class="text-sm text-muted-foreground">Market Cap</div>
                <div class="font-medium" id="marketCap">₦847.2B</div>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
        <!-- Chart Section -->
        <div class="lg:col-span-3">
            <div class="bg-card border border-border rounded-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold">Price Chart</h3>
                    <div class="flex items-center space-x-2">
                        <button class="tab-button active" onclick="changeTimeframe('1H')">1H</button>
                        <button class="tab-button" onclick="changeTimeframe('4H')">4H</button>
                        <button class="tab-button" onclick="changeTimeframe('1D')">1D</button>
                        <button class="tab-button" onclick="changeTimeframe('1W')">1W</button>
                    </div>
                </div>
                <div class="h-96">
                    <canvas id="priceChart"></canvas>
                </div>
            </div>

            <!-- Order Book -->
            <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-card border border-border rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Order Book</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm text-muted-foreground border-b border-border pb-2">
                            <span>Price (USD)</span>
                            <span>Amount (BTC)</span>
                            <span>Total</span>
                        </div>
                        <!-- Sell Orders -->
                        <div id="sellOrders" class="space-y-1">
                            <!-- Populated by JavaScript -->
                        </div>
                        <div class="border-t border-border pt-2 pb-2">
                            <div class="text-center font-bold" id="spreadPrice">₦43,250.00</div>
                        </div>
                        <!-- Buy Orders -->
                        <div id="buyOrders" class="space-y-1">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Recent Trades -->
                <div class="bg-card border border-border rounded-lg p-6">
                    <h3 class="text-lg font-semibold mb-4">Recent Trades</h3>
                    <div class="space-y-2">
                        <div class="flex justify-between text-sm text-muted-foreground border-b border-border pb-2">
                            <span>Price</span>
                            <span>Amount</span>
                            <span>Time</span>
                        </div>
                        <div id="recentTrades" class="space-y-1 max-h-64 overflow-y-auto">
                            <!-- Populated by JavaScript -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trading Panel -->
        <div class="lg:col-span-1">
            <div class="bg-card border border-border rounded-lg p-6">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold">Place Order</h3>
                    <div class="text-sm text-muted-foreground">Balance: ₦10,000.00</div>
                </div>

                <!-- Order Type Tabs -->
                <div class="flex space-x-2 mb-4">
                    <button class="tab-button active" onclick="setOrderType('market')" id="marketTab">Market</button>
                    <button class="tab-button" onclick="setOrderType('limit')" id="limitTab">Limit</button>
                </div>

                <!-- Buy/Sell Tabs -->
                <div class="flex space-x-2 mb-4">
                    <button class="btn-buy flex-1 active" onclick="setOrderSide('buy')" id="buyTab">Buy</button>
                    <button class="btn-sell flex-1" onclick="setOrderSide('sell')" id="sellTab">Sell</button>
                </div>

                <!-- Order Form -->
                <form onsubmit="placeOrder(event)" class="space-y-4">
                    <div id="limitPriceField" class="hidden">
                        <label class="block text-sm font-medium mb-1">Limit Price</label>
                        <input type="number" id="limitPrice" class="input-field" placeholder="0.00" step="0.01">
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1">Amount</label>
                        <input type="number" id="orderAmount" class="input-field" placeholder="0.001" step="0.001"
                            required>
                    </div>

                    <div>
                        <label class="block text-sm font-medium mb-1">Total (USD)</label>
                        <input type="number" id="orderTotal" class="input-field" placeholder="0.00" step="0.01"
                            readonly>
                    </div>

                    <!-- Quick Amount Buttons -->
                    <div class="grid grid-cols-4 gap-2">
                        <button type="button" class="tab-button text-xs" onclick="setQuickAmount(25)">25%</button>
                        <button type="button" class="tab-button text-xs" onclick="setQuickAmount(50)">50%</button>
                        <button type="button" class="tab-button text-xs" onclick="setQuickAmount(75)">75%</button>
                        <button type="button" class="tab-button text-xs" onclick="setQuickAmount(100)">100%</button>
                    </div>

                    <button type="submit" class="w-full btn-buy" id="orderSubmitBtn">
                        Buy BTC
                    </button>
                </form>
            </div>

            <!-- Portfolio -->
            <div class="mt-6 bg-card border border-border rounded-lg p-6">
                <h3 class="text-lg font-semibold mb-4">Portfolio</h3>
                <div class="space-y-3">
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-medium">USD</div>
                            <div class="text-sm text-muted-foreground">US Dollar</div>
                        </div>
                        <div class="text-right">
                            <div class="font-medium">₦10,000.00</div>
                            <div class="text-sm text-muted-foreground">Available</div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-medium">BTC</div>
                            <div class="text-sm text-muted-foreground">Bitcoin</div>
                        </div>
                        <div class="text-right">
                            <div class="font-medium">0.25000000</div>
                            <div class="text-sm text-muted-foreground">≈ ₦10,812.50</div>
                        </div>
                    </div>

                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-medium">ETH</div>
                            <div class="text-sm text-muted-foreground">Ethereum</div>
                        </div>
                        <div class="text-right">
                            <div class="font-medium">1.50000000</div>
                            <div class="text-sm text-muted-foreground">≈ ₦4,020.75</div>
                        </div>
                    </div>
                </div>

                <div class="mt-4 pt-4 border-t border-border">
                    <div class="flex justify-between items-center">
                        <span class="font-semibold">Total Portfolio</span>
                        <span class="font-semibold text-chart-2">₦24,833.25</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock %}